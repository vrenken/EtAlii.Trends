@page "/"

@using Syncfusion.Blazor.Navigations
@using Syncfusion.Blazor.Layouts

@inject IJSRuntime JsRuntime

@inject IQueryDispatcher _queryDispatcher;
@inject ICommandDispatcher _commandDispatcher;

<SfSplitter Height="100%" Width="100%" SeparatorSize=4>
    <SplitterEvents Resizing="@OnSplitterResized"></SplitterEvents>
    <SplitterPanes>
        <SplitterPane Size="300px" Min="20%" Max="90%">
            <ContentTemplate>
                <div id="layerTreeView">
                    <SfTreeView
                        TValue="Layer"
                        @ref="_layersTreeView"
                        ShowCheckBox="true"
                        AutoCheck="true"
                        AllowEditing="true"
                        AllowDragAndDrop="true"
                        CheckedNodesChanged="OnCheckedLayerNodeChanged"
                        ExpandedNodesChanged="OnExpandedLayerNodesChanged">
                        <TreeViewFieldsSettings
                            TValue="Layer"
                            Id="Id"
                            DataSource="@_layers"
                            Text="Name"
                            ParentID="ParentId"
                            HasChildren="HasChild"
                            Expanded="Expanded"
                            IsChecked="IsChecked"/>
                        <TreeViewEvents
                            TValue="Layer"
                            NodeSelected="OnLayerNodeSelect"
                            NodeClicked="OnLayerNodeClicked"
                            NodeEdited="OnLayerNodeEdited"></TreeViewEvents>
                        <SfContextMenu TValue="MenuItem" @ref="_layerTreeViewMenu" Target="#layerTreeView" Items="_layerTreeViewMenuItems">
                            <MenuEvents TValue="MenuItem" ItemSelected="OnLayerTreeViewMenuItemSelect"></MenuEvents>
                        </SfContextMenu>
                        <TreeViewNodeAnimationSettings>
                            <TreeViewAnimationExpand Duration="0" Effect="AnimationEffect.None" Easing="Linear"/>
                            <TreeViewAnimationCollapse Duration="0" Effect="AnimationEffect.None" Easing="Linear"/>
                        </TreeViewNodeAnimationSettings>
                    </SfTreeView>
                </div>
            </ContentTemplate>
        </SplitterPane>
        <SplitterPane Size="200px" Min="40%" Max="90%">
            <ContentTemplate>
                <SfToolbar @ref="@_toolbar" Height="@_toolbarHeight" Width="100%">
                    <ToolbarItems>
                        <ToolbarItem @ref="@_zoomInItem" TooltipText="ZoomIn" CssClass="@_zoomInItemCssClass" PrefixIcon="e-icons e-zoom-in" OnClick="@OnZoomInItemClick"></ToolbarItem>
                        <ToolbarItem @ref="@_zoomOutItem" TooltipText="ZoomOut" CssClass="@_zoomOutItemCssClass" PrefixIcon="e-icons e-zoom-out" OnClick="@OnZoomOutItemClick"></ToolbarItem>
                        <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                        <ToolbarItem @ref="@_panItem" PrefixIcon="e-icons e-pan" CssClass="@_panItemCssClass" TooltipText="Pan Tool" OnClick="@OnPanClick"></ToolbarItem>
                        <ToolbarItem @ref="@_pointerItem" PrefixIcon="e-icons e-mouse-pointer" CssClass="@_pointerItemCssClass" TooltipText="Pointer" OnClick="@OnPointerClick"></ToolbarItem>
                        <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                        <ToolbarItem @ref="@_viewItem" CssClass="@_viewCssClass" Disabled="@_view" PrefixIcon="e-icons e-bring-to-view" TooltipText="Bring into view" OnClick="@OnBringIntoViewClick">
                        </ToolbarItem>
                        <ToolbarItem @ref="@_centerItem" CssClass="@_centerCssClass" Disabled="@_center" PrefixIcon="e-icons e-bring-to-center" TooltipText="Bring into center" OnClick="@OnBringIntoCenterClick">
                        </ToolbarItem>
                        <ToolbarItem Type="ItemType.Separator"></ToolbarItem>
                        <ToolbarItem @ref="@_fitToPageItem" CssClass="@_fitCssClass" OnClick="@OnFitToPageClick" PrefixIcon="e-icons e-zoom-to-fit" TooltipText="Fit To Page">
                        </ToolbarItem>
                    </ToolbarItems>
                </SfToolbar>
                <SfDiagramComponent
                    @ref="_trendsDiagram"
                    Width="@_diagramWidth"
                    Height="@_diagramHeight"
                    InteractionController="@_diagramTool"
                    ConnectorCreating="ApplyConnectorDefaults"
                    NodeCreating="ApplyTrendNodeDefaults"
                    TextChanged="OnTrendNodeTextChanged"
                    PositionChanged="OnTrendNodePositionChanged"
                    Nodes="@_nodes"
                    Connectors="@_connectors"
                    Click="OnClicked">
                    <Layout
                        type="@LayoutType.None"
                        HorizontalSpacing="_horizontalSpacing"
                        Orientation="_orientation"
                        VerticalSpacing="_verticalSpacing"
                        HorizontalAlignment="_horizontalAlignment"
                        VerticalAlignment="_verticalAlignment"
                        GetLayoutInfo="GetLayoutInfo">
                        <LayoutMargin Top="50" Bottom="50" Right="50" Left="50"/>
                    </Layout>
                </SfDiagramComponent>
            </ContentTemplate>
        </SplitterPane>
    </SplitterPanes>
</SfSplitter>
