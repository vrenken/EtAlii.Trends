@page "/"

@namespace EtAlii.Trends.Editor

@using Syncfusion.Blazor.Layouts
@using EtAlii.Trends.Layers
@using EtAlii.Trends.Trends
@using Orientation = Syncfusion.Blazor.Layouts.Orientation

@inject IQueryDispatcher _queryDispatcher;
@inject ICommandDispatcher _commandDispatcher;

<SfSplitter SeparatorSize="1">
    <SplitterEvents Resizing="OnSplitterResized"></SplitterEvents>
    <SplitterPanes>
        <SplitterPane Size="300px" Min="20%" Max="90%">
            <ContentTemplate>
                <SfSplitter Orientation="Orientation.Vertical" SeparatorSize=4>
                    <SplitterPanes>
                        <SplitterPane Size="75%" Min="10%" Max="90%">
                            <ContentTemplate>
                                <LayersTreeView DiagramId="@_diagramId" />
                            </ContentTemplate>
                        </SplitterPane>
                        <SplitterPane Size="25%" Min="10%" Max="90%">
                            <ContentTemplate>
                                <TrendPropertyGrid @ref="_trendPropertyGrid" Trend="@_context.SelectedTrend" />
                            </ContentTemplate>
                        </SplitterPane>
                    </SplitterPanes>
                </SfSplitter>
            </ContentTemplate>
        </SplitterPane>
        <SplitterPane Size="200px" Min="40%" Max="90%">
            <ContentTemplate>
                <TrendsDiagram @ref="_trendsDiagram" DiagramId="@_diagramId" @bind-Trend="@_context.SelectedTrend" />
            </ContentTemplate>
        </SplitterPane>
    </SplitterPanes>
</SfSplitter>
